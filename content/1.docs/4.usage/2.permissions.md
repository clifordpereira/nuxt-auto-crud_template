---
title: RBAC & Permissions
description: Technical architecture of the database-driven Role-Based Access Control system.
---

> The `nuxt-auto-crud` implements a dynamic **RBAC** (Role-Based Access Control) system stored within SQLite. The [Core Engine] evaluates these permissions at the API layer, while the [Template Implementation] provides the UI widgets and hooks to enforce visibility rules.

## üìê RBAC Schema [Core Engine]
The permission system is comprised of five relational tables in SQLite.

| Table Name | Logic Role | Description |
| :--- | :--- | :--- |
| `roles` | Subject | Root identity groups (e.g., `admin`, `manager`). |
| `resources` | Object | The API entity (e.g., `users`, `tickets`). |
| `permissions` | Action | The CRUD operation (e.g., `create`, `list_own`). |
| `role_resource_permissions` | Junction | The mapping of Subject + Object + Action. |
| `users` | Instance | Linking an individual identity to a `Role`. |

## üö¶ Permission Matrix
The system supports both global and ownership-scoped actions.

### Global Actions
- `list`: View active records (status='active').
- `list_all`: View all records regardless of status.
- `create`: Validated record insertion.
- `read`: Single instance retrieval.
- `update`: Partial instance modification.
- `delete`: Instance removal/soft-delete.

### Ownership Scoped Actions [Core Engine]
These require a `createdBy` or `userId` column in the Drizzle schema.

| Action | Logic Gate |
| :--- | :--- |
| `list_own` | `WHERE createdBy = current_user_id` |
| `update_own` | `IF record.createdBy == user.id THEN ALLOW` |
| `delete_own` | `IF record.createdBy == user.id THEN ALLOW` |

## üõ† Management Flow [Template Implementation]

### 1. Resource Declaration
Register new Drizzle tables in the `resources` table to enable the permission tracking.
```sql
INSERT INTO resources (name) VALUES ('blog_posts');
```

### 2. Granting Access
Link the Role, Resource, and Permission IDs in `role_resource_permissions`.
```sql
-- Role ID: 2 (Editor), Resource ID: 5 (Blog), Permission ID: 3 (Update)
INSERT INTO role_resource_permissions (role_id, resource_id, permission_id) VALUES (2, 5, 3);
```

## üåç Public Access [Core Engine]
Guest (unauthenticated) access is managed via the reserved `public` role. 
- **Requirement**: `autoCrud.auth.authentication` must be `true`.
- **Logic**: Any resource/action granted to the `public` role is exposed at the API layer without session verification.
